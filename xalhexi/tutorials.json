{
  "id": "10",
  "title": "Deploy Flask App with Virtual Environment (Correct Order)",
  "description": "Proper step-by-step order for setting up a Flask app with a copied virtual environment and GitHub repository on a server",
  "steps": [
    {
      "id": "10-1",
      "heading": "Copy the Virtual Environment FIRST",
      "explanation": "Copy the prepared virtual environment before creating or cloning any app files. This ensures Python, Gunicorn, and required packages are available without installing globally.",
      "code": "cp -r /opt/virt ~/"
    },
    {
      "id": "10-2",
      "heading": "Activate the Virtual Environment",
      "explanation": "Activate the virtual environment so all Python commands use the isolated environment. You should see the environment name appear in your prompt.",
      "code": "source ~/virt/bin/activate\n\n# Expected prompt format:\n# (virt) username@server:~$"
    },
    {
      "id": "10-3",
      "heading": "Create webapps Directory",
      "explanation": "Create the main container directory for all web applications and move into it.",
      "code": "mkdir webapps\ncd webapps"
    },
    {
      "id": "10-4",
      "heading": "Create Application Directory (app1)",
      "explanation": "Each Flask app must live in its own directory. The main app file (app.py) should never be placed directly inside webapps.",
      "code": "mkdir app1\ncd app1"
    },
    {
      "id": "10-5",
      "heading": "Clone GitHub Repository Into app1",
      "explanation": "Clone the repository into the current directory. If the repository is empty, Git will warn you — this is normal and not an error.",
      "code": "git clone git@github.com:USERNAME/REPO_NAME.git .\n\n# Note:\n# \"You appear to have cloned an empty repository\" is SAFE"
    },
    {
      "id": "10-6",
      "heading": "Create app.py AFTER Cloning",
      "explanation": "Create the Flask application file only after cloning so Git tracks it correctly.",
      "code": "nano app.py\n\n# Save with:\n# Ctrl + O → Enter\n# Ctrl + X"
    },
    {
      "id": "10-7",
      "heading": "Create templates Folder",
      "explanation": "Flask requires HTML files to be stored inside a templates directory.",
      "code": "mkdir templates\ncd templates\nnano home.html"
    },
    {
      "id": "10-8",
      "heading": "Verify Final Directory Structure",
      "explanation": "Confirm that your project follows the required Flask layout before running Gunicorn.",
      "code": "cd ~\ntree webapps\n\n# Expected structure:\n# webapps/\n# └── app1/\n#     ├── app.py\n#     └── templates/\n#         └── home.html"
    },
    {
      "id": "10-9",
      "heading": "Key Deployment Rule (Important)",
      "explanation": "The order matters. Copying the virtual environment first prevents broken dependencies and avoids installing packages globally.",
      "code": "# Correct order summary:\n# 1. cp virtualenv\n# 2. activate virtualenv\n# 3. mkdir webapps\n# 4. mkdir app1\n# 5. git clone\n# 6. create app.py\n# 7. create templates/\n# 8. run Gunicorn"
    }
  ]
}
